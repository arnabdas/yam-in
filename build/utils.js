var utils={showLoadingIcon:function(){$("#loadingIcon").show()},hideLoadingIcon:function(){$("#loadingIcon").hide()},buildFeedInfo:function(s){var i=$("#content"),e=s.messages,t=s.references,a=[];0==i.find("div.feed_main").length&&i.append('<div class="feed_main"></div>');var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$.each(e,function(s,i){var e=$.grep(t,function(s){return s.id==i.sender_id}),d=e.length>0?e[0].full_name:"",r=e.length>0?e[0].mugshot_url:"",n=e.length>0?e[0].id:"",v=i.created_at,o=new Date,p=new Date(v);o.getDate()==p.getDate()&&o.getMonth()==p.getMonth()&&o.getFullYear()==p.getFullYear()?(v=v.split(" ")[1],v=v.split(":")[0]+":"+v.split(":")[1]):v=l[p.getMonth()]+" "+p.getDate(),a.push("<div class='msg_main' data-msg-id='"+i.id+"'>"),a.push("<div class='msg_sender_pic'><a class='senderLinkAnc' data-userid='"+n+"' href='javascript:{}'><img src='"+r+"'/></a></div>"),a.push("<div class='msg_details_main'>"),a.push("<div class='msg_head'>"),a.push("<div class='msg_sender_name'><a class='senderLinkAnc' data-userid='"+n+"' href='javascript:{}'>"+d+"</a></div>"),a.push("<div class='msg_date_time'>"+v+"</div>"),a.push("</div>"),a.push("<div class='msg_body'>"),a.push(i.body.plain),a.push("</div>"),a.push("</div>"),a.push("</div>")}),i.find("div.feed_main").append(a.join("")),i.off("click",".feed_main a.senderLinkAnc").on("click",".feed_main a.senderLinkAnc",function(){var s=$(this),i=s.data("userid"),e=new Profile;$(window).off("scroll"),e.init(i)})},showSearchResults:function(s){container=$("#content"),profile=s,str=[],str.push("<div>"),str.push("<div>Users "+s.count.users+"</div>"),str.push("<div>Messages "+s.count.messages+"</div>"),str.push("<div>Groups "+s.count.groups+"</div>"),str.push("<div>Pages "+s.count.pages+"</div>"),str.push("<div>Topics "+s.count.topics+"</div>"),str.push("<div>"+utils.buildFeedInfo(s.messages)+"</div>"),str.push("</div>"),container.empty().html(str.join(""))},showProfile:function(s){{var i=this,e=$("#content"),t=s.mugshot_url_template.replace("{width}x{height}","100x100");str=[]}str.push('<div class="profileInfo_main">'),str.push('<div class="profile_cell_div">'),str.push('<div class="profileDataDiv profile_pic"><img src="'+t+'"/></div>'),str.push('<div class="profileDataDiv full_name">'+s.full_name+"</div>"),str.push('<div class="profileDataDiv job_title">'+i.getEmptyStringIfNull(s.job_title)+"</div>"),str.push('<div class="stats">'),str.push('<table width="100%">'),str.push("<tr>"),str.push('<td width="33%"><div class="following"><img title="followers" src="../css/followers.png"><span class="statsVal"> '+s.stats.followers+"</span></div></td>"),str.push('<td width="33%"><div class="followers"><img title="following" src="../css/following.png"> <span class="statsVal"> '+s.stats.following+"</span></div></td>"),str.push('<td width="33%"><div class="updates"> <img title="updates" src="../css/updates.png"><span class="statsVal"> '+s.stats.updates+"</span></div></td>"),str.push("</tr>"),str.push("</table>"),str.push("</div>"),str.push("</div>"),str.push('<div class="profile_cell_div">'),str.push('<div class="profileDataDiv infoTitle"></div>'),str.push('<div class="profileDataDiv summary"><div class="profileLabeldiv">Summary </div><div class="profileValuediv">'+i.getEmptyStringIfNull(s.summary)+"</div></div>"),str.push('<div class="profileDataDiv department"><div class="profileLabeldiv">Department </div><div class="profileValuediv">'+i.getEmptyStringIfNull(s.department)+"</div></div>"),str.push('<div class="profileDataDiv location"><div class="profileLabeldiv">Location </div><div class="profileValuediv">'+i.getEmptyStringIfNull(s.location)+"</div></div>"),str.push('<div class="profileDataDiv birth_date"><div class="profileLabeldiv">Birthday </div><div class="profileValuediv">'+s.birth_date+"</div></div>"),str.push('<div class="profileDataDiv email"><div class="profileLabeldiv">Email </div><div class="profileValuediv">'+s.email+"</div></div>"),str.push('<div class="profileDataDiv phone"><div class="profileLabeldiv">Phone </div><div class="profileValuediv">'+i.getPhoneNumberInfo(s.contact.phone_numbers)+"</div></div>"),str.push('<div class="profileDataDiv interests"><div class="profileLabeldiv">Interests </div><div class="profileValuediv">'+i.getEmptyStringIfNull(s.interests)+"</div></div>"),str.push('<div class="profileDataDiv expertise"><div class="profileLabeldiv">Expertise </div><div class="profileValuediv">'+i.getEmptyStringIfNull(s.expertise)+"</div></div>"),str.push('<div class="profileDataDiv active_since"><div class="profileLabeldiv">Active Since </div><div class="profileValuediv">'+i.getActiveDuration(new Date(s.activated_at.toString()))+" </div></div>"),str.push("</div>"),e.empty().html(str.join(""))},getActiveDuration:function(s){var i=this,e=s,t=new Date;return i.getTimeDuration(e,t)},getTimeDuration:function(s,i){var e=this,t=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())),a=new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate())),l=t.getDate()-a.getDate();0>l&&(t.setMonth(t.getMonth()-1),l+=e.daysInMonth(t));var d=t.getMonth()-a.getMonth();0>d&&(t.setFullYear(t.getFullYear()-1),d+=12);var r=t.getFullYear()-a.getFullYear(),n="";return r>1&&(n+=r+" years "),d>1&&(n+=d+" months "),l>1&&(n+=l+" days"),n},daysInMonth:function(s){var i=new Date(s.getFullYear(),s.getMonth(),1),e=new Date(s.getFullYear(),s.getMonth()+1,1),t=(e-i)/864e5;return t},getPhoneNumberInfo:function(s){var i=[];for(var e in s)i.push("<div>"),i.push('<div class="phoneType">'+s[e].type+"</div>"),i.push('<div class="phoneNumber"> '+s[e].number+"</div>"),i.push("</div>");return i.join("")},getEmptyStringIfNull:function(s){return null==s||void 0==s?"":s}};