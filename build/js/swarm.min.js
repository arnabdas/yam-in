Swarm={},Swarm.ActivityFeed=function(){},Swarm.ActivityFeed.prototype={init:function(){var e=this;e.displayActivityFeed()},displayActivityFeed:function(){{var e=this;$("#content")}$("#content").empty(),Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/streams/activities.json?access_token="+yammer.getAccessToken(),data:{limit:7},dataType:"json",xhrFields:{withCredentials:!1},success:function(i){Swarm.utils.hideLoadingIcon(),e.buildActivityFeed(i)},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})},buildActivityFeed:function(e){{var i=$("#content"),t=e.items,s=e.references;e.objects}0==i.find("div.feed_main").length&&i.append('<div class="feed_main"></div>');var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=[];$.each(t,function(e,i){var t,n,o,l,c,d,u,m=i.message,p=[];$.each(m.split(" "),function(e,i){if(n=i.indexOf("]"),-1!=(t=i.indexOf("user:"))){o=i.substring(t+5,n);var a=$.grep(s,function(e){return e.id==o});l=a.length>0?a[0].full_name:"",c=a.length>0?a[0].mugshot_url:"",u=l}else if(-1!=(t=i.indexOf("group:"))){d=i.substring(t+6,n);var a=$.grep(s,function(e){return e.id==d});l=a.length>0?a[0].full_name:""}else if(-1!=(t=i.indexOf("page:"))){pageId=i.substring(t+5,n);var r=$.grep(s,function(e){return e.id==pageId});l=r.length>0?r[0].full_name:""}else if(-1!=(t=i.indexOf("uploaded_file:"))){pageId=i.substring(t+14,n);var r=$.grep(s,function(e){return e.id==pageId});l=r.length>0?r[0].full_name:""}else l=i;p.push(l)});var v=i.created_at;m=p.join(" ");var h=new Date,f=new Date(v);h.getDate()==f.getDate()&&h.getMonth()==f.getMonth()&&h.getFullYear()==f.getFullYear()?(v=v.split(" ")[1],v=v.split(":")[0]+":"+v.split(":")[1]):v=a[f.getMonth()]+" "+f.getDate(),r.push("<div class='msg_main mui-panel mui-z2' data-msg-id=''>"),r.push("<div class='msg_sender_pic'><a class='senderLinkAnc' data-userid='"+o+"' href='javascript:{}'><img src='"+c+"'/></a></div>"),r.push("<div class='msg_details_main'>"),r.push("<div class='msg_head'>"),r.push("<div class='msg_sender_name'><a class='senderLinkAnc' data-userid='"+o+"' href='javascript:{}'>"+u+"</a></div>"),r.push("<div class='msg_date_time'>"+v+"</div>"),r.push("</div>"),r.push("<div class='msg_body'>"),r.push(m),r.push("</div>"),r.push("</div>"),r.push("</div>")}),i.find("div.feed_main").append(r.join("")),i.slimScroll().off("slimscroll"),i.slimScroll().removeData("events"),i.off("click",".feed_main a.senderLinkAnc").on("click",".feed_main a.senderLinkAnc",function(){var e=$(this),i=e.data("userid"),t=new Swarm.Profile;$(window).off("scroll"),t.init(i)})}},Swarm.Analytics=function(){},Swarm.Analytics.prototype={init:function(){var e=this;$(window).off("scroll"),Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/users/current.json?access_token="+yammer.getAccessToken()+"&include_group_memberships=true",dataType:"json",xhrFields:{withCredentials:!1},success:function(i){$("#content").html('<div id="donut_chart" class="msg_main" style="width:340px;height:250px;padding-top:10px"></div>');var t=e.generateGroupData(i);e.drawChart(t),Swarm.utils.hideLoadingIcon(),$("div.uv-chart-div").off("click"),$("div.uv-chart-div").on("click","g.uv-arc-groups",function(i){e.getGroupMessages(t[$(this).index()].id)})},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})},getGroupMessages:function(e){jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages/in_group/"+e+".json?access_token="+yammer.getAccessToken(),data:{limit:7},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){$("#content").find("div.feed_main").remove(),Swarm.utils.buildFeedInfo(e)},error:function(){alert("error")}})},generateGroupData:function(e){var i=[];return $.each(e.group_memberships,function(e,t){10>e&&i.push({name:t.full_name,value:21-2*e,id:t.id})}),i},generateGroupChart:function(e,i){var t=this,s=0,a={},r=function(n){a[e.group_memberships[s].id]=n,s++,s<e.group_memberships.length?t.constructGroupData(e,s,r):i(a)};t.constructGroupData(e,s,r)},constructGroupData:function(e,i,t){{var s=e.group_memberships[i].id;e.group_memberships[i].full_name}jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages/in_group/"+s+".json?access_token="+yammer.getAccessToken(),dataType:"json",xhrFields:{withCredentials:!1},success:function(e){t(e)},error:function(){alert("error")}})},drawChart:function(e){var i={graph:{bgcolor:"none",custompalette:["#A6CEE3","#1F78B4","#B2DF8A","#33A02C","#FB9A99","#E31A1C","#FDBF6F","#FF7F00","#CAB2D6","#6A3D9A"]},dimension:{width:200,height:200},meta:{caption:"Top 10 groups in the past week"},label:{suffix:"",strokecolor:"#555"},margin:{top:20,bottom:20,left:-1,right:100},caption:{fontvariant:"none"},frame:{bgcolor:"none"},axis:{fontfamily:"Arial"},legend:{position:"right",fontfamily:"Arial"},caption:{fontfamily:"Arial"},subCaption:{fontfamily:"Arial"}},t={categories:["groups"],dataset:{groups:e}};i.meta.position="#donut_chart",uv.chart("Pie",t,i)}},Swarm.Client=function(){var e=this;e.navBar=$(".nav-bar"),e.header=$(".header"),e.content=$("#content"),e.feedsService=new Swarm.Feeds,e.messagesService=new Swarm.Messages,e.analyticsService=new Swarm.Analytics,e.activityFeedService=new Swarm.ActivityFeed,e.searchService=new Swarm.Search,e.postMessageService=new Swarm.PostMessage,e.notificationsService=new Swarm.Notifications,e.groupsService=new Swarm.Groups,e.init()},Swarm.Client.prototype={init:function(){var e=this;e.bindUserEvents(),e.invokeCustomization(),e.getCurrentUserMugshot(),e.getCurrentUserNetworks(),e.navBar.find("i").first().trigger("click",[!0])},bindUserEvents:function(){var e=this;e.bindTabSelectEvent(),e.bindSearchEvent()},bindTabSelectEvent:function(){var e=this;e.navBar.find("i").click(function(i,t){var s=$(this),a=s.data("jsval"),r=s.attr("title"),n=a.replace(/^[a-z]/,function(e){return e.toUpperCase()});e.makeActiveTab(n,r),chrome.alarms.create("checkNewTasks",{when:1e3,periodInMinutes:1}),chrome.browserAction.setBadgeText({text:""}),s.parent().siblings().find("i").removeClass("active"),s.addClass("active")})},bindSearchEvent:function(){var e=this;e.header.on("change","input#search",function(){var i=$(this);e.searchService.init(i.val())})},makeActiveTab:function(e,i){var t=this,s=t.header.find(".page-title").html(i);switch(t.content.slimScroll().removeData("events"),t.content.parent().find(".slimScrollBar").css("top",0),e){case"Feeds":t.feedsService.init();break;case"Messages":t.messagesService.init();break;case"Analytics":t.analyticsService.init();break;case"Postmessage":t.postMessageService.init();break;case"Activityfeed":t.activityFeedService.init();break;case"Notifications":t.notificationsService.init();break;case"Groups":t.groupsService.init();break;case"Search":s.html('<div class="mui-form-group"><input type="text" id="search" class="mui-form-control mui-empty mui-dirty" /><label>Search</label></div>'),s.find("input").focus();break;default:console.log("Unregistered service: "+e)}},invokeCustomization:function(){var e=this;e.content.slimScroll({height:"480px",width:"330px"}).bind("slimscroll",function(e,i){console.log("At position "+i)})},getCurrentUserMugshot:function(){(new Swarm.Profile).getCurrentUserProfileInformation(function(e){$(".header .current-mugshot").html($("<img />").attr("src",e.mugshot_url_template.replace("{width}x{height}","100x100")).on("click",function(){(new Swarm.Profile).getCurrentUserProfileInformation()}))})},getCurrentUserNetworks:function(){var e=this;(new Swarm.Network).getCurrentNetworkInformation(function(i){var t=e.header.find(".right-pane").html($('<div class="mui-dropdown" />')).find(".mui-dropdown");t.append($('<button class="mui-btn mui-btn-default mui-btn-flat" data-mui-toggle="dropdown" />').append($('<span class="mui-caret" />'))),t.append($('<ul class="mui-dropdown-menu mui-dropdown-menu-right" />'));for(var s=0,a=i.length;a>s;s++)t.find(".mui-dropdown-menu").append($("<li />").append($("<a />").attr("href","#").data("networkId",i[s].id).html(i[s].name))),i[s].is_primary===!0&&(t.find(".mui-btn").remove(),t.prepend($('<button class="mui-btn mui-btn-default mui-btn-flat" data-mui-toggle="dropdown" />').html(i[s].name).append($('<span class="mui-caret" />'))))})}},Swarm.Feeds=function(){},Swarm.Feeds.prototype={init:function(){var e=this;e.getFeeds(),e.attachWindowScrollEvent()},getFeeds:function(){$("#content").empty(),Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages.json?access_token="+yammer.getAccessToken(),data:{limit:7},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){Swarm.utils.hideLoadingIcon(),Swarm.utils.buildFeedInfo(e),$("#content").append('<div><button class="mui-z3 mui-btn mui-btn-floating mui-btn-floating-mini post-btn"><i class="material-icons">add</i></button></div>'),$(".post-btn").click(function(e){swarmInstance.postMessageService.init()})},error:function(){Swarm.utils.hideLoadingIcon(),alert("Error, Please login to Yammer")}})},attachWindowScrollEvent:function(){var e=$("#content");e.slimScroll().unbind("slimscroll").bind("slimscroll",function(e,i){if("bottom"==i){if($("body").height()!=$(window).height()+window.pageYOffset)return!1;var t=$("div.msg_main:last").attr("data-msg-id");jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages.json?access_token="+yammer.getAccessToken(),data:{limit:7,older_than:t},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){Swarm.utils.buildFeedInfo(e)},error:function(){alert("error")}})}})}},Swarm.Groups=function(){},Swarm.Groups.prototype={init:function(){var e=this;e.buildGroupMessageFeed()},buildGroupMessageFeed:function(){var e=this;container=$("#content"),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/users/current.json?access_token="+yammer.getAccessToken()+"&include_group_memberships=true",data:{limit:1},dataType:"json",xhrFields:{withCredentials:!1},success:function(i){str=[],str.push('<div class="mui-form-group group_list">'),str.push("<label>Groups</label>"),str.push('<div class="mui-select">'),str.push('<select name="groups" id="slt_groups">'),$.each(i.group_memberships,function(e,i){str.push('<option value="'+i.id+'">'+i.full_name+"</option>")}),str.push("</select>"),str.push("</div>"),str.push("</div>"),container.empty().html(str.join("")),e.displayGroupMessages(),$("#slt_groups").trigger("change")},error:function(){alert("error")}})},displayGroupMessages:function(){$("#slt_groups").change(function(){var e=$("#content"),i=$("select#slt_groups").val();jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages/in_group/"+i+".json?access_token="+yammer.getAccessToken(),data:{limit:20},dataType:"json",xhrFields:{withCredentials:!1},success:function(i){e.find("div.feed_main").remove(),Swarm.utils.buildFeedInfo(i)},error:function(){alert("error")}})})}},$(document).ready(function(){swarmInstance=new Swarm.Client}),Swarm.Messages=function(){},Swarm.Messages.prototype={init:function(){var e=this;e.getReceivedMessages(),e.attachWindowScrollEvent()},getReceivedMessages:function(){$("#content").empty(),Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages/received.json?access_token="+yammer.getAccessToken(),data:{limit:7},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){Swarm.utils.hideLoadingIcon(),chrome.storage.local.set({lastMsgId:e.messages[0].id}),Swarm.utils.buildFeedInfo(e)},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})},attachWindowScrollEvent:function(){var e=$("#content");e.slimScroll().bind("slimscroll",function(e,i){if("bottom"==i){if($("body").height()!=$(window).height()+window.pageYOffset)return!1;var t=$("div.msg_main:last").attr("data-msg-id");jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages/received.json?access_token="+yammer.getAccessToken(),data:{limit:7,older_than:t},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){Swarm.utils.buildFeedInfo(e)},error:function(){alert("error")}})}})}},Swarm.Network=function(){},Swarm.Network.prototype={getCurrentNetworkInformation:function(e){jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/networks/current.json?access_token="+yammer.getAccessToken(),dataType:"json",xhrFields:{withCredentials:!1},success:function(i){e?e(i):console.log("Network: No access specified.")},error:function(){alert("error")}})}},Swarm.Notifications=function(){},Swarm.Notifications.prototype={init:function(){var e=this;e.displayNotifications()},displayNotifications:function(){var e=this;$("#content").empty(),Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/streams/notifications.json?access_token="+yammer.getAccessToken(),data:{limit:7},dataType:"json",xhrFields:{withCredentials:!1},success:function(i){Swarm.utils.hideLoadingIcon(),e.buildNotificationFeed(i)},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})},buildNotificationFeed:function(e){var i=$("#content"),t=e.items,s=e.objects.user,a=e.references;0==i.find("div.feed_main").length&&i.append('<div class="feed_main"></div>');var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=[];$.each(t,function(e,i){var t,o,l,c,d,u,m,p=i.message,v=[];if($.each(p.split(" "),function(e,i){if(o=i.indexOf("]"),-1!=(t=i.indexOf("user:"))){l=i.substring(t+5,o);var r=$.grep(a,function(e){return e.id==l});h=$.grep(s,function(e){return e.id==l}),c=r.length>0?r[0].full_name:h[0].full_name,d=r.length>0?r[0].mugshot_url:h[0].full_name,m=c}else if(-1!=(t=i.indexOf("group:"))){u=i.substring(t+6,o);var r=$.grep(a,function(e){return e.id==u});c=r.length>0?r[0].full_name:""}else c=i;v.push(c)}),"undefined"==typeof m){l=i.objects[0].id;var h=$.grep(s,function(e){return e.id==l}),c=h.length>0?h[0].full_name:"";d=h.length>0?h[0].mugshot_url:"",m=c}var f=i.created_at;p=v.join(" ");var g=new Date,w=new Date(f);g.getDate()==w.getDate()&&g.getMonth()==w.getMonth()&&g.getFullYear()==w.getFullYear()?(f=f.split(" ")[1],f=f.split(":")[0]+":"+f.split(":")[1]):f=r[w.getMonth()]+" "+w.getDate(),n.push("<div class='msg_main mui-panel mui-z2' data-msg-id=''>"),n.push("<div class='msg_sender_pic'><a class='senderLinkAnc' data-userid='"+l+"' href='javascript:{}'><img src='"+d+"'/></a></div>"),n.push("<div class='msg_details_main'>"),n.push("<div class='msg_head'>"),n.push("<div class='msg_sender_name'><a class='senderLinkAnc' data-userid='"+l+"' href='javascript:{}'>"+m+"</a></div>"),n.push("<div class='msg_date_time'>"+f+"</div>"),n.push("</div>"),n.push("<div class='msg_body'>"),n.push(p),n.push("</div>"),n.push("</div>"),n.push("</div>")}),i.find("div.feed_main").append(n.join("")),i.slimScroll().off("slimscroll"),i.slimScroll().removeData("events"),i.off("click",".feed_main a.senderLinkAnc").on("click",".feed_main a.senderLinkAnc",function(){var e=$(this),i=e.data("userid"),t=new Swarm.Profile;$(window).off("scroll"),t.init(i)})}},Swarm.PostMessage=function(){},Swarm.PostMessage.prototype={init:function(){var e=this;e.postMessageToGroup()},postMessageToGroup:function(){var e=this;e.getGroupList()},postMessage:function(){$(".post_form").submit(function(){var e=$("select#slt_groups").val(),i=$("textarea#message_body").val();jQuery.ajax({type:"POST",beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+yammer.getAccessToken())},url:"https://www.yammer.com/api/v1/messages.json?access_token="+yammer.getAccessToken(),data:{group_id:e,body:i},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){},error:function(){alert("error")}})})},getGroupList:function(){var e=this;container=$("#content"),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/users/current.json?access_token="+yammer.getAccessToken()+"&include_group_memberships=true",data:{limit:1},dataType:"json",xhrFields:{withCredentials:!1},success:function(i){str=[],str.push("<div class='post_form mui-panel mui-z2'>"),str.push("<form>"),str.push('<div class="mui-form-group">'),str.push("<label>Groups</label>"),str.push('<div class="mui-select">'),str.push('<select name="groups" id="slt_groups">'),$.each(i.group_memberships,function(e,i){str.push('<option value="'+i.id+'">'+i.full_name+"</option>")}),str.push("</select>"),str.push("</div>"),str.push("</div>"),str.push('<div class="mui-form-group">'),str.push('<textarea name="message_body" class="mui-form-control" id="message_body" rows="10" cols="37"/>'),str.push('<label class="mui-form-floating-label">Write Message Here</label>'),str.push("</div>"),str.push('<input class="post_button mui-btn mui-btn-primary mui-btn-raised mui-btn-flat" type="submit" ></input>'),str.push("</form>"),str.push("</div>"),container.empty().html(str.join("")),container.slimScroll().off("slimscroll"),container.slimScroll().removeData("events"),container.find('textarea[name="message_body"]').focus(),e.postMessage()},error:function(){alert("error")}})}},Swarm.Profile=function(){},Swarm.Profile.prototype={init:function(e){var i=this;i.getProfileInformation(e)},getProfileInformation:function(e){$("#content").empty(),Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/users/"+e+".json?access_token="+yammer.getAccessToken(),data:{limit:1},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){Swarm.utils.hideLoadingIcon(),Swarm.utils.showProfile(e)},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})},getCurrentUserProfileInformation:function(e){jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/users/current.json?access_token="+yammer.getAccessToken(),data:{limit:1},dataType:"json",xhrFields:{withCredentials:!1},success:function(i){e?e(i):Swarm.utils.showProfile(i)},error:function(){alert("error")}})}},Swarm.Search=function(){},Swarm.Search.prototype={init:function(e){var i=this;if(e.length>0)container=$("#content"),container.empty(),i.getSearchQueryResults(e);else{var t=new Swarm.Feeds;t.init()}},getSearchQueryResults:function(e){Swarm.utils.showLoadingIcon(),jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/search.json?access_token="+yammer.getAccessToken(),data:{search:e,page:1,num_per_page:5},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){Swarm.utils.hideLoadingIcon(),Swarm.utils.buildFeedInfo(e.messages)},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})}},Swarm.utils={showLoadingIcon:function(){$("#content").html('<div id="loading-icon"><div class="la-pacman la-lg"><div></div><div></div><div></div><div></div><div></div></div></div>')},hideLoadingIcon:function(){$("#loading-icon").remove()},buildFeedInfo:function(e){var i=$("#content"),t=e.messages,s=e.references,a=[];0==i.find("div.feed_main").length&&i.append('<div class="feed_main"></div>');var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];$.each(t,function(e,i){var t=$.grep(s,function(e){return e.id==i.sender_id}),n=t.length>0?t[0].full_name:"",o=t.length>0?t[0].mugshot_url:"",l=t.length>0?t[0].id:"",c=i.created_at,d=new Date,u=new Date(c);d.getDate()==u.getDate()&&d.getMonth()==u.getMonth()&&d.getFullYear()==u.getFullYear()?(c=c.split(" ")[1],c=c.split(":")[0]+":"+c.split(":")[1]):c=r[u.getMonth()]+" "+u.getDate(),a.push("<div class='msg_main mui-panel mui-z2' data-msg-id='"+i.id+"'>"),a.push("<div class='msg_sender_pic'><a class='senderLinkAnc' data-userid='"+l+"' href='javascript:{}'><img src='"+o+"'/></a></div>"),a.push("<div class='msg_details_main'>"),a.push("<div class='msg_head'>"),a.push("<div class='msg_sender_name'><a class='senderLinkAnc' data-userid='"+l+"' href='javascript:{}'>"+n+"</a></div>"),a.push("<div class='msg_date_time'>"+c+"</div>"),a.push("</div>"),a.push("<div class='msg_body' data-thread-id='"+i.thread_id+"'>"),a.push(i.body.rich||i.body.plain),a.push("</div>"),a.push("<div class='msg_info'>"),a.push("<div class='msg_like_number'><i class='material-icons'>thumb_up</i><span>"+i.liked_by.count+"</span></div>"),a.push("<div class='msg_replies_number'><i class='material-icons'>comment</i><span>0</span></div>"),a.push("</div>"),a.push("</div>"),a.push("</div>")}),i.find("div.feed_main").append(a.join("")),i.off("click",".feed_main a.senderLinkAnc").on("click",".feed_main a.senderLinkAnc",function(){var e=$(this),i=e.data("userid"),t=new Swarm.Profile;$(window).off("scroll"),t.init(i)}),i.off("click",".feed_main .msg_body").on("click",".feed_main .msg_body",function(){var e=$(this),t=e.data("thread-id");jQuery.ajax({type:"GET",url:"https://www.yammer.com/api/v1/messages/in_thread/"+t+".json?access_token="+yammer.getAccessToken(),data:{limit:7},dataType:"json",xhrFields:{withCredentials:!1},success:function(e){i.empty(),i.slimScroll().off("slimscroll"),i.slimScroll().removeData("events"),Swarm.utils.hideLoadingIcon(),Swarm.utils.buildFeedInfo(e)},error:function(){Swarm.utils.hideLoadingIcon(),alert("error")}})})},showSearchResults:function(e){container=$("#content"),profile=e,str=[],str.push("<div>"),str.push("<div>Users "+e.count.users+"</div>"),str.push("<div>Messages "+e.count.messages+"</div>"),str.push("<div>Groups "+e.count.groups+"</div>"),str.push("<div>Pages "+e.count.pages+"</div>"),str.push("<div>Topics "+e.count.topics+"</div>"),str.push("<div>"+Swarm.utils.buildFeedInfo(e.messages)+"</div>"),str.push("</div>"),container.empty().html(str.join(""))},showProfile:function(e){{var i=this,t=$("#content"),s=e.mugshot_url_template.replace("{width}x{height}","100x100");str=[]}str.push('<div class="profileInfo_main mui-panel mui-z2">'),str.push('<div class="profile_cell_div">'),str.push('<div class="profileDataDiv profile_pic"><img src="'+s+'"/></div>'),str.push('<div class="profileDataDiv full_name">'+e.full_name+"</div>"),str.push('<div class="profileDataDiv job_title">'+i.getEmptyStringIfNull(e.job_title)+"</div>"),str.push('<div class="stats">'),str.push('<table width="100%">'),str.push("<tr>"),str.push('<td width="33%"><div class="following"><img title="followers" src="../img/followers.png"><span class="statsVal"> '+e.stats.followers+"</span></div></td>"),str.push('<td width="33%"><div class="followers"><img title="following" src="../img/following.png"> <span class="statsVal"> '+e.stats.following+"</span></div></td>"),str.push('<td width="33%"><div class="updates"> <img title="updates" src="../img/updates.png"><span class="statsVal"> '+e.stats.updates+"</span></div></td>"),str.push("</tr>"),str.push("</table>"),str.push("</div>"),str.push("</div>"),str.push('<div class="profile_cell_div profile-summary">'),str.push('<div class="profileDataDiv summary"><div class="profileLabeldiv">Summary </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getEmptyStringIfNull(e.summary)+"</div></div>"),str.push('<div class="profileDataDiv department"><div class="profileLabeldiv">Department </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getEmptyStringIfNull(e.department)+"</div></div>"),str.push('<div class="profileDataDiv location"><div class="profileLabeldiv">Location </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getEmptyStringIfNull(e.location)+"</div></div>"),str.push('<div class="profileDataDiv birth_date"><div class="profileLabeldiv">Birthday </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+e.birth_date+"</div></div>"),str.push('<div class="profileDataDiv email"><div class="profileLabeldiv">Email </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+e.email+"</div></div>"),str.push('<div class="profileDataDiv phone"><div class="profileLabeldiv">Phone </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getPhoneNumberInfo(e.contact.phone_numbers)+"</div></div>"),str.push('<div class="profileDataDiv interests"><div class="profileLabeldiv">Interests </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getEmptyStringIfNull(e.interests)+"</div></div>"),str.push('<div class="profileDataDiv expertise"><div class="profileLabeldiv">Expertise </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getEmptyStringIfNull(e.expertise)+"</div></div>"),str.push('<div class="profileDataDiv active_since"><div class="profileLabeldiv">Active Since </div><div class="profileBreakDiv"></div><div class="profileValuediv">'+i.getActiveDuration(new Date(e.activated_at.toString()))+" </div></div>"),str.push("</div>"),t.empty().html(str.join("")),t.slimScroll().off("slimscroll"),t.slimScroll().removeData("events")},getActiveDuration:function(e){var i=this,t=e,s=new Date;return i.getTimeDuration(t,s)},getTimeDuration:function(e,i){var t=this,s=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())),a=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),r=s.getDate()-a.getDate();0>r&&(s.setMonth(s.getMonth()-1),r+=t.daysInMonth(s));var n=s.getMonth()-a.getMonth();0>n&&(s.setFullYear(s.getFullYear()-1),n+=12);var o=s.getFullYear()-a.getFullYear(),l="";return o>1&&(l+=o+" years "),n>1&&(l+=n+" months "),r>1&&(l+=r+" days"),l},daysInMonth:function(e){var i=new Date(e.getFullYear(),e.getMonth(),1),t=new Date(e.getFullYear(),e.getMonth()+1,1),s=(t-i)/864e5;return s},getPhoneNumberInfo:function(e){var i=[];for(var t in e)i.push("<div>"),i.push('<div class="phoneType">'+e[t].type+"</div>"),i.push('<div class="phoneNumber"> '+e[t].number+"</div>"),i.push("</div>");return i.join("")},getEmptyStringIfNull:function(e){return null==e||void 0==e?"":e}};